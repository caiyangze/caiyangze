# 动态广场功能测试指南

## 测试环境准备

1. 确保后端服务 `lovelink-social` 正在运行
2. 确保用户已登录
3. 确保有一些测试动态数据

## 功能测试步骤

### 1. 基础切换功能测试

**测试步骤：**
1. 打开相亲广场页面 (`/pages/square/square`)
2. 点击顶部的"动态广场"标签
3. 观察页面内容是否从用户列表切换到动态列表
4. 点击其他标签（推荐、附近、新人、活跃）
5. 观察是否能正常切换回用户列表

**预期结果：**
- 页面内容能够平滑切换，无闪烁
- 不会跳转到新页面
- 标签高亮状态正确

### 2. 动态列表显示测试

**测试步骤：**
1. 在动态广场标签下
2. 检查动态列表是否正常显示
3. 检查每个动态项包含的信息：
   - 用户头像
   - 用户昵称
   - 发布时间
   - 动态内容
   - 动态图片（如果有）
   - 位置信息（如果有）
   - 点赞数、评论数、浏览数

**预期结果：**
- 动态列表正常显示
- 所有信息完整展示
- 图片能正常加载和显示

### 3. 图片功能测试

**测试步骤：**
1. 查看包含图片的动态
2. 检查图片网格布局：
   - 单张图片：大图显示
   - 两张图片：左右布局
   - 3-4张图片：2x2网格
   - 5-9张图片：3x3网格
3. 点击图片预览大图
4. 测试图片加载失败的占位符

**预期结果：**
- 图片布局正确
- 点击能预览大图
- 加载失败显示占位符

### 4. 交互功能测试

**测试步骤：**
1. 点击动态项查看详情
2. 点击点赞按钮
3. 点击评论按钮
4. 对于自己的动态，测试删除功能

**预期结果：**
- 能正确跳转到动态详情页
- 点赞功能正常，数量更新
- 能跳转到评论页面
- 删除功能正常

### 5. 分页和刷新测试

**测试步骤：**
1. 下拉刷新动态列表
2. 上拉加载更多动态
3. 检查加载状态显示
4. 检查"已经到底啦"提示

**预期结果：**
- 下拉刷新正常工作
- 上拉加载更多正常
- 加载动画与用户列表一致
- 状态提示正确显示

### 6. 错误处理测试

**测试步骤：**
1. 断网状态下测试
2. 测试头像加载失败
3. 测试动态图片加载失败
4. 测试API请求失败

**预期结果：**
- 网络错误有友好提示
- 头像失败显示默认占位符
- 图片失败显示占位符
- API错误有错误提示

## 性能测试

### 1. 切换性能
- 标签切换应该流畅，无卡顿
- 内存使用合理，无内存泄漏

### 2. 滚动性能
- 长列表滚动流畅
- 图片懒加载正常

## 兼容性测试

### 1. 不同设备测试
- iOS设备测试
- Android设备测试
- 不同屏幕尺寸适配

### 2. 不同数据情况
- 空动态列表
- 只有文字的动态
- 包含图片的动态
- 包含位置的动态

## 常见问题排查

### 1. 图片不显示
- 检查图片URL是否正确
- 检查网络连接
- 检查图片服务器是否可访问

### 2. 动态列表为空
- 检查API接口是否正常
- 检查用户登录状态
- 检查后端数据

### 3. 切换不生效
- 检查 `currentTabIndex` 状态
- 检查条件渲染逻辑
- 检查控制台错误信息

## 测试完成标准

✅ 所有基础功能正常工作
✅ 图片显示和预览正常
✅ 交互功能响应正确
✅ 分页和刷新正常
✅ 错误处理友好
✅ 性能表现良好
✅ 兼容性良好

## 注意事项

1. 测试时注意观察控制台是否有错误信息
2. 测试不同网络环境下的表现
3. 注意测试边界情况（如空数据、网络错误等）
4. 确保与原有功能不冲突
