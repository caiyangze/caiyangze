# åŠ¨æ€è¯¦æƒ…é¡µé¢åŠŸèƒ½å®ç°è¯´æ˜

## åŠŸèƒ½æ¦‚è¿°

å®ç°äº†å®Œæ•´çš„åŠ¨æ€è¯¦æƒ…é¡µé¢ï¼ŒåŒ…æ‹¬å¤´åƒæ˜µç§°æ”¾å¤§ã€ç‚¹èµåŠŸèƒ½ã€æµè§ˆæ¬¡æ•°ç»Ÿè®¡ã€è¯„è®ºåŠŸèƒ½ç­‰ï¼Œå¹¶ä¿æŒä¸ä¸»é¡µæ ·å¼çš„ç»Ÿä¸€æ€§ã€‚

## ä¸»è¦åŠŸèƒ½å®ç°

### 1. å¤´åƒå’Œæ˜µç§°æ”¾å¤§ä¼˜åŒ–

**å¤´åƒå°ºå¯¸è°ƒæ•´**:
- å¹¿åœºé¡µé¢ï¼š56rpx â†’ 70rpxï¼ˆå¢å¤§25%ï¼‰
- è¯¦æƒ…é¡µé¢ï¼š80rpxï¼ˆæ›´å¤§æ˜¾ç¤ºï¼‰
- è¾¹æ¡†å¢å¼ºï¼š2rpxè¾¹æ¡†ï¼Œæ›´æ˜æ˜¾çš„è§†è§‰æ•ˆæœ

**æ˜µç§°æ ·å¼ä¼˜åŒ–**:
- å¹¿åœºé¡µé¢ï¼š26rpx â†’ 32rpxï¼Œå­—é‡600 â†’ 700
- è¯¦æƒ…é¡µé¢ï¼š36rpxï¼Œå­—é‡700
- æ·»åŠ æ–‡å­—é˜´å½±ï¼Œæå‡å¯è¯»æ€§

**æ—¶é—´æ˜¾ç¤ºä¼˜åŒ–**:
- å¹¿åœºé¡µé¢ï¼š20rpx â†’ 24rpx
- è¯¦æƒ…é¡µé¢ï¼š26rpx
- é€æ˜åº¦å’Œé˜´å½±ä¼˜åŒ–

### 2. ç‚¹èµåŠŸèƒ½å®ç°

**å‰ç«¯äº¤äº’**:
```javascript
async function likeMoment(moment) {
  try {
    const momentApi = await import('@/api/moment.js');
    const result = await momentApi.default.likeMoment(moment.momentId);
    if (result.code === 200) {
      // æ›´æ–°æœ¬åœ°çŠ¶æ€
      moment.isLiked = !moment.isLiked;
      moment.likeCount = moment.isLiked 
        ? (moment.likeCount || 0) + 1 
        : Math.max((moment.likeCount || 0) - 1, 0);
    }
  } catch (error) {
    // é”™è¯¯å¤„ç†
  }
}
```

**APIæ¥å£**:
- æ¥å£åœ°å€ï¼š`POST /api/social/moment/like/{momentId}`
- æ”¯æŒç‚¹èµå’Œå–æ¶ˆç‚¹èµ
- å®æ—¶æ›´æ–°ç‚¹èµçŠ¶æ€å’Œæ•°é‡

### 3. åŠ¨æ€è¯¦æƒ…é¡µé¢è·³è½¬

**ç‚¹å‡»äº‹ä»¶å¤„ç†**:
```javascript
async function goToMomentDetail(moment) {
  try {
    // å¢åŠ æµè§ˆæ¬¡æ•°
    const momentApi = await import('@/api/moment.js');
    await momentApi.default.incrementViewCount(moment.momentId);
    
    // æ›´æ–°æœ¬åœ°æµè§ˆæ¬¡æ•°
    moment.viewCount = (moment.viewCount || 0) + 1;
    
    // è·³è½¬åˆ°è¯¦æƒ…é¡µé¢
    uni.navigateTo({
      url: `/pages/moment/detail?id=${moment.momentId}`
    });
  } catch (error) {
    // å³ä½¿APIè°ƒç”¨å¤±è´¥ï¼Œä¹Ÿå…è®¸è·³è½¬
    uni.navigateTo({
      url: `/pages/moment/detail?id=${moment.momentId}`
    });
  }
}
```

**æµè§ˆæ¬¡æ•°ç»Ÿè®¡**:
- æ¥å£åœ°å€ï¼š`POST /api/social/moment/view/{momentId}`
- ç‚¹å‡»åŠ¨æ€å¡ç‰‡æ—¶è‡ªåŠ¨è°ƒç”¨
- å®æ—¶æ›´æ–°æµè§ˆæ¬¡æ•°æ˜¾ç¤º

### 4. åŠ¨æ€è¯¦æƒ…é¡µé¢è®¾è®¡

**é¡µé¢ç»“æ„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† è¿”å›    åŠ¨æ€è¯¦æƒ…              â”‚ â† è‡ªå®šä¹‰å¯¼èˆªæ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ‘¤ ç”¨æˆ·ä¿¡æ¯ï¼ˆæ›´å¤§æ˜¾ç¤ºï¼‰          â”‚
â”‚ ğŸ“ ä½ç½®ä¿¡æ¯                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚     å›¾ç‰‡å±•ç¤ºåŒºåŸŸ            â”‚ â”‚ â† æ›´å¤§çš„å›¾ç‰‡
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ åŠ¨æ€æ–‡å­—å†…å®¹...                 â”‚
â”‚ â¤ï¸12  ğŸ’¬5  ğŸ‘ï¸88               â”‚ â† æ“ä½œæŒ‰é’®
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¯„è®º (3)                       â”‚
â”‚ ğŸ‘¤ ç”¨æˆ·A: è¯„è®ºå†…å®¹...           â”‚
â”‚ ğŸ‘¤ ç”¨æˆ·B: è¯„è®ºå†…å®¹...           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [è¾“å…¥æ¡†] [å‘é€]                 â”‚ â† å›ºå®šåº•éƒ¨
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ·å¼ç‰¹ç‚¹**:
- ä¸ä¸»é¡µä¿æŒä¸€è‡´çš„æ¸å˜èƒŒæ™¯
- æ¯›ç»ç’ƒæ•ˆæœçš„å¡ç‰‡è®¾è®¡
- é€æ˜åŒ–çš„æŒ‰é’®å’Œå…ƒç´ 
- å“åº”å¼çš„å›¾ç‰‡ç½‘æ ¼å¸ƒå±€

### 5. è¯„è®ºåŠŸèƒ½å®ç°

**è¯„è®ºåˆ—è¡¨æ˜¾ç¤º**:
- æ”¯æŒåˆ†é¡µåŠ è½½ï¼ˆé»˜è®¤20æ¡ï¼‰
- æ˜¾ç¤ºè¯„è®ºè€…å¤´åƒã€æ˜µç§°ã€æ—¶é—´
- è¯„è®ºå†…å®¹è‡ªé€‚åº”æ˜¾ç¤º

**å‘è¡¨è¯„è®ºåŠŸèƒ½**:
```javascript
async function submitComment() {
  if (!commentText.value.trim()) {
    uni.showToast({ title: 'è¯·è¾“å…¥è¯„è®ºå†…å®¹', icon: 'none' });
    return;
  }
  
  try {
    const momentApi = await import('@/api/moment.js');
    const result = await momentApi.default.addComment(momentId.value, commentText.value.trim());
    if (result.code === 200) {
      commentText.value = '';
      await loadCommentList(); // é‡æ–°åŠ è½½è¯„è®ºåˆ—è¡¨
      momentDetail.value.commentCount = (momentDetail.value.commentCount || 0) + 1;
      uni.showToast({ title: 'è¯„è®ºæˆåŠŸ', icon: 'success' });
    }
  } catch (error) {
    uni.showToast({ title: 'è¯„è®ºå¤±è´¥', icon: 'error' });
  }
}
```

**è¯„è®ºè¾“å…¥æ¡†**:
- å›ºå®šåœ¨é¡µé¢åº•éƒ¨
- æ”¯æŒè‡ªåŠ¨èšç„¦ï¼ˆä»è¯„è®ºæŒ‰é’®è¿›å…¥æ—¶ï¼‰
- å‘é€æŒ‰é’®çŠ¶æ€å“åº”è¾“å…¥å†…å®¹

### 6. APIæ¥å£æ‰©å±•

**æ–°å¢æ¥å£æ–¹æ³•**:
```javascript
// å¢åŠ æµè§ˆæ¬¡æ•°
incrementViewCount(momentId) {
  return http.request({
    url: `${SOCIAL_BASE_URL}/api/social/moment/view/${momentId}`,
    method: 'POST'
  });
}

// è·å–è¯„è®ºåˆ—è¡¨ï¼ˆç®€åŒ–æ–¹æ³•åï¼‰
getCommentList(momentId, pageNum = 1, pageSize = 20) {
  return this.getMomentComments(momentId, pageNum, pageSize);
}

// æ·»åŠ è¯„è®ºï¼ˆç®€åŒ–æ–¹æ³•åï¼‰
addComment(momentId, content) {
  return this.addMomentComment(momentId, content);
}
```

## é¡µé¢è·¯ç”±é…ç½®

**pages.jsoné…ç½®**:
```json
{
  "path": "pages/moment/detail",
  "style": {
    "navigationBarTitleText": "åŠ¨æ€è¯¦æƒ…",
    "app-plus": {
      "titleNView": false
    }
  }
}
```

## ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### 1. è§†è§‰ä½“éªŒ
- **ç»Ÿä¸€çš„è®¾è®¡é£æ ¼**ï¼šä¸ä¸»é¡µä¿æŒä¸€è‡´çš„æ¸å˜èƒŒæ™¯å’Œæ¯›ç»ç’ƒæ•ˆæœ
- **æ›´å¤§çš„æ˜¾ç¤ºå…ƒç´ **ï¼šå¤´åƒã€æ˜µç§°ã€å›¾ç‰‡éƒ½æœ‰æ‰€æ”¾å¤§ï¼Œæå‡è§†è§‰æ•ˆæœ
- **æ¸…æ™°çš„å±‚æ¬¡ç»“æ„**ï¼šå†…å®¹åŒºåŸŸã€è¯„è®ºåŒºåŸŸã€è¾“å…¥åŒºåŸŸå±‚æ¬¡åˆ†æ˜

### 2. äº¤äº’ä½“éªŒ
- **æµç•…çš„é¡µé¢è·³è½¬**ï¼šç‚¹å‡»åŠ¨æ€å¡ç‰‡å¹³æ»‘è·³è½¬åˆ°è¯¦æƒ…é¡µ
- **å®æ—¶çš„æ•°æ®æ›´æ–°**ï¼šç‚¹èµã€è¯„è®ºã€æµè§ˆæ¬¡æ•°å®æ—¶æ›´æ–°
- **ä¾¿æ·çš„æ“ä½œæ–¹å¼**ï¼šä¸€é”®è¿”å›ã€å¿«é€Ÿè¯„è®ºã€å›¾ç‰‡é¢„è§ˆ

### 3. åŠŸèƒ½å®Œæ•´æ€§
- **å®Œæ•´çš„CRUDæ“ä½œ**ï¼šæŸ¥çœ‹ã€ç‚¹èµã€è¯„è®ºã€æµè§ˆç»Ÿè®¡
- **é”™è¯¯å¤„ç†æœºåˆ¶**ï¼šç½‘ç»œå¼‚å¸¸æ—¶çš„å‹å¥½æç¤º
- **æ•°æ®åŒæ­¥**ï¼šè¯¦æƒ…é¡µå’Œåˆ—è¡¨é¡µæ•°æ®ä¿æŒåŒæ­¥

## æŠ€æœ¯å®ç°è¦ç‚¹

### 1. å“åº”å¼è®¾è®¡
- ä½¿ç”¨CSS Gridå®ç°çµæ´»çš„å›¾ç‰‡å¸ƒå±€
- æ”¯æŒ1-9å¼ å›¾ç‰‡çš„ä¸åŒæ’åˆ—æ–¹å¼
- é€‚é…ä¸åŒå±å¹•å°ºå¯¸å’Œè®¾å¤‡

### 2. çŠ¶æ€ç®¡ç†
- æœ¬åœ°çŠ¶æ€å®æ—¶æ›´æ–°ï¼Œå‡å°‘ç½‘ç»œè¯·æ±‚
- ä¹è§‚æ›´æ–°ç­–ç•¥ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- é”™è¯¯å›æ»šæœºåˆ¶ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§

### 3. æ€§èƒ½ä¼˜åŒ–
- å›¾ç‰‡æ‡’åŠ è½½å’Œé¢„è§ˆåŠŸèƒ½
- è¯„è®ºåˆ†é¡µåŠ è½½ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½è¿‡å¤šæ•°æ®
- APIè°ƒç”¨å¤±è´¥æ—¶çš„é™çº§å¤„ç†

### 4. ç”¨æˆ·ä½“éªŒç»†èŠ‚
- è‡ªåŠ¨èšç„¦è¯„è®ºè¾“å…¥æ¡†ï¼ˆä»è¯„è®ºæŒ‰é’®è¿›å…¥æ—¶ï¼‰
- å‘é€æŒ‰é’®çŠ¶æ€å“åº”è¾“å…¥å†…å®¹
- æ“ä½œæˆåŠŸçš„å³æ—¶åé¦ˆ

## åç«¯æ¥å£è¦æ±‚

### 1. æµè§ˆæ¬¡æ•°ç»Ÿè®¡
```
POST /api/social/moment/view/{momentId}
Response: { code: 200, message: "success" }
```

### 2. åŠ¨æ€è¯¦æƒ…è·å–
```
GET /api/social/moment/detail/{momentId}
Response: {
  code: 200,
  data: {
    momentId, nickname, avatarUrl, publishTime,
    location, content, mediaList, 
    likeCount, commentCount, viewCount, isLiked
  }
}
```

### 3. è¯„è®ºç›¸å…³æ¥å£
```
GET /api/social/moment/comments/{momentId}?pageNum=1&pageSize=20
POST /api/social/moment/comment { momentId, content }
```

## æµ‹è¯•å»ºè®®

1. **åŠŸèƒ½æµ‹è¯•**ï¼šéªŒè¯ç‚¹èµã€è¯„è®ºã€æµè§ˆç»Ÿè®¡åŠŸèƒ½
2. **ç•Œé¢æµ‹è¯•**ï¼šç¡®è®¤æ ·å¼ä¸ä¸»é¡µä¿æŒä¸€è‡´
3. **äº¤äº’æµ‹è¯•**ï¼šæµ‹è¯•é¡µé¢è·³è½¬å’Œè¿”å›åŠŸèƒ½
4. **å…¼å®¹æ€§æµ‹è¯•**ï¼šéªŒè¯ä¸åŒè®¾å¤‡å’Œå±å¹•çš„é€‚é…
5. **æ€§èƒ½æµ‹è¯•**ï¼šç¡®è®¤é¡µé¢åŠ è½½å’Œæ“ä½œå“åº”é€Ÿåº¦
6. **é”™è¯¯å¤„ç†æµ‹è¯•**ï¼šéªŒè¯ç½‘ç»œå¼‚å¸¸æ—¶çš„å¤„ç†æœºåˆ¶
