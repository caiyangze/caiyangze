# è®¢å•é¡µé¢é—®é¢˜ä¿®å¤è¯´æ˜

## ğŸ› å‘ç°çš„é—®é¢˜

æ ¹æ®æ‚¨çš„åé¦ˆï¼Œè®¢å•åˆ—è¡¨é¡µé¢å­˜åœ¨ä¸¤ä¸ªä¸»è¦é—®é¢˜ï¼š

1. **å®½åº¦ä¸å¤Ÿ**ï¼šç­›é€‰æ ‡ç­¾æ˜¾ç¤ºä¸å®Œæ•´ï¼Œæ–‡å­—è¢«æˆªæ–­
2. **æ²¡æœ‰æ”¯ä»˜æµç¨‹**ï¼šç”¨æˆ·æ— æ³•æ”¯ä»˜è®¢å•ï¼Œç¼ºå°‘å®Œæ•´çš„æ”¯ä»˜åŠŸèƒ½

## ğŸ”§ ä¿®å¤æ–¹æ¡ˆ

### 1. ç­›é€‰æ ‡ç­¾å®½åº¦é—®é¢˜ä¿®å¤

#### é—®é¢˜åˆ†æ
- åŸæ¥ä½¿ç”¨ `flex: 1` å¹³å‡åˆ†é…å®½åº¦
- å½“æ ‡ç­¾æ–‡å­—è¾ƒé•¿æ—¶ä¼šè¢«å‹ç¼©
- åœ¨å°å±å¹•è®¾å¤‡ä¸Šæ›´åŠ æ˜æ˜¾

#### ä¿®å¤æ–¹æ¡ˆ
```css
.status-filter {
  display: flex;
  background: white;
  padding: 20rpx 15rpx;
  margin-bottom: 20rpx;
  overflow-x: auto;        /* å…è®¸æ¨ªå‘æ»šåŠ¨ */
  white-space: nowrap;     /* é˜²æ­¢æ¢è¡Œ */
}

.filter-item {
  flex-shrink: 0;          /* é˜²æ­¢å‹ç¼© */
  min-width: 120rpx;       /* æœ€å°å®½åº¦ */
  text-align: center;
  padding: 20rpx 25rpx;    /* å¢åŠ å†…è¾¹è· */
  font-size: 26rpx;        /* ç¨å¾®å‡å°å­—ä½“ */
  color: #666;
  border-radius: 12rpx;
  margin: 0 8rpx;          /* å‡å°‘é—´è· */
  transition: all 0.3s ease;
}
```

#### ä¿®å¤æ•ˆæœ
- âœ… æ ‡ç­¾æ–‡å­—å®Œæ•´æ˜¾ç¤º
- âœ… æ”¯æŒæ¨ªå‘æ»šåŠ¨æŸ¥çœ‹æ›´å¤šé€‰é¡¹
- âœ… åœ¨å„ç§å±å¹•å°ºå¯¸ä¸‹éƒ½èƒ½æ­£å¸¸æ˜¾ç¤º

### 2. æ”¯ä»˜æµç¨‹å®Œæ•´å®ç°

#### é—®é¢˜åˆ†æ
- ç¼ºå°‘è®¢å•åˆ›å»ºé€»è¾‘
- ç¼ºå°‘æ”¯ä»˜æ¥å£
- å‰ç«¯æ²¡æœ‰æ­£ç¡®æ˜¾ç¤ºæ”¯ä»˜æŒ‰é’®

#### ä¿®å¤æ–¹æ¡ˆ

##### åç«¯å®ç°

1. **è®¢å•åˆ›å»ºé€»è¾‘**
```java
// åœ¨ç‰µçº¿ç”³è¯·æˆåŠŸåè‡ªåŠ¨åˆ›å»ºè®¢å•
private TbMatchmakerOrder createMatchmakerOrder(Long userId, Long matchmakerId, MatchmakingRequestCreateDTO dto) {
    TbMatchmakerOrder order = new TbMatchmakerOrder();
    
    // ç”Ÿæˆè®¢å•ç¼–å·
    String orderNo = "MM" + System.currentTimeMillis() + String.format("%04d", (int)(Math.random() * 10000));
    
    // è®¾ç½®åŸºæœ¬ä¿¡æ¯
    order.setOrderNo(orderNo);
    order.setUserId(userId);
    order.setMatchmakerId(matchmakerId);
    order.setServiceType(1); // å•æ¬¡ç‰µçº¿æœåŠ¡
    
    // æ ¹æ®çº¢å¨˜ç­‰çº§è®¾ç½®ä»·æ ¼
    BigDecimal amount = getServiceAmount(matchmakerId);
    order.setAmount(amount);
    order.setPayAmount(amount);
    
    // åˆå§‹çŠ¶æ€ä¸ºå¾…æ”¯ä»˜
    order.setOrderStatus(0);
    
    return order;
}
```

2. **å·®å¼‚åŒ–å®šä»·**
```java
private BigDecimal getServiceAmount(Long matchmakerId) {
    // æ ¹æ®çº¢å¨˜ç­‰çº§è®¾ç½®ä¸åŒä»·æ ¼
    switch (level) {
        case 3: return new BigDecimal("299.00"); // é‡‘ç‰Œçº¢å¨˜
        case 2: return new BigDecimal("199.00"); // æ­£å¼çº¢å¨˜
        case 1: return new BigDecimal("99.00");  // é¢„å¤‡çº¢å¨˜
        default: return new BigDecimal("99.00");
    }
}
```

3. **æ”¯ä»˜æ¥å£**
```java
@PostMapping("/pay/{orderId}")
public Result payOrder(@PathVariable Long orderId, @RequestParam Integer payType, @RequestHeader("token") String token) {
    // 1. éªŒè¯è®¢å•çŠ¶æ€
    // 2. å¤„ç†æ”¯ä»˜é€»è¾‘
    // 3. æ›´æ–°è®¢å•çŠ¶æ€
    // 4. è®¾ç½®æœåŠ¡æ—¶é—´
}
```

##### å‰ç«¯å®ç°

1. **æ˜¾ç¤ºæ”¯ä»˜æŒ‰é’®**
```vue
<!-- æ ¹æ®è®¢å•çŠ¶æ€æ˜¾ç¤ºå¯¹åº”æŒ‰é’® -->
<button v-if="order.orderStatus === 0" class="action-btn pay-btn" @click.stop="payOrder(order)">
  ç«‹å³æ”¯ä»˜
</button>
<button v-if="order.orderStatus === 0" class="action-btn cancel-btn" @click.stop="cancelOrder(order.orderId)">
  å–æ¶ˆè®¢å•
</button>
```

2. **æ”¯ä»˜æµç¨‹**
```javascript
// æ”¯ä»˜è®¢å•
async confirmPay(payType) {
  try {
    uni.showLoading({ title: 'æ”¯ä»˜ä¸­...' })
    const result = await payMatchmakerOrder(this.currentPayOrder.orderId, payType)
    
    if (result.code === 200) {
      uni.showToast({ title: 'æ”¯ä»˜æˆåŠŸ', icon: 'success' })
      this.refreshOrderList() // åˆ·æ–°è®¢å•åˆ—è¡¨
    }
  } catch (error) {
    uni.showToast({ title: 'æ”¯ä»˜å¤±è´¥', icon: 'error' })
  }
}
```

## ğŸ”„ å®Œæ•´çš„ä¸šåŠ¡æµç¨‹

### ç”¨æˆ·æ“ä½œæµç¨‹
```
1. ç”¨æˆ·å‘èµ·ç‰µçº¿ç”³è¯·
   â†“
2. é€‰æ‹©çº¢å¨˜ï¼ˆæ™ºèƒ½åˆ†é…/æŒ‡å®šçº¢å¨˜ï¼‰
   â†“
3. æäº¤ç”³è¯·
   â†“
4. ç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºè®¢å•
   â†“
5. è·³è½¬åˆ°è®¢å•åˆ—è¡¨
   â†“
6. ç”¨æˆ·é€‰æ‹©æ”¯ä»˜æ–¹å¼
   â†“
7. å®Œæˆæ”¯ä»˜
   â†“
8. çº¢å¨˜å¼€å§‹æä¾›æœåŠ¡
```

### è®¢å•çŠ¶æ€æµè½¬
```
å¾…æ”¯ä»˜(0) â†’ å·²æ”¯ä»˜(1) â†’ å·²å®Œæˆ(4)
    â†“
  å·²å–æ¶ˆ(2)
    â†“
  å·²é€€æ¬¾(3)
```

## ğŸ’° å®šä»·ç­–ç•¥

| çº¢å¨˜ç­‰çº§ | æœåŠ¡ä»·æ ¼ | æœåŠ¡ç‰¹ç‚¹ |
|---------|---------|---------|
| ğŸŒŸ é¢„å¤‡çº¢å¨˜ | Â¥99 | æ–°æ‰‹çº¢å¨˜ï¼Œä»·æ ¼ä¼˜æƒ  |
| â­ æ­£å¼çº¢å¨˜ | Â¥199 | ä¸“ä¸šå¯é ï¼ŒæœåŠ¡ç¨³å®š |
| ğŸ‘‘ é‡‘ç‰Œçº¢å¨˜ | Â¥299 | ç»éªŒä¸°å¯Œï¼ŒæˆåŠŸç‡é«˜ |

## ğŸ¨ ç•Œé¢ä¼˜åŒ–æ•ˆæœ

### ä¿®å¤å‰
- ç­›é€‰æ ‡ç­¾è¢«å‹ç¼©ï¼Œæ–‡å­—æ˜¾ç¤ºä¸å…¨
- æ²¡æœ‰æ”¯ä»˜æŒ‰é’®ï¼Œç”¨æˆ·æ— æ³•å®Œæˆæ”¯ä»˜
- è®¢å•æµç¨‹ä¸å®Œæ•´

### ä¿®å¤å
- âœ… ç­›é€‰æ ‡ç­¾å®Œæ•´æ˜¾ç¤ºï¼Œæ”¯æŒæ¨ªå‘æ»šåŠ¨
- âœ… å®Œæ•´çš„æ”¯ä»˜æµç¨‹ï¼Œæ”¯æŒå¤šç§æ”¯ä»˜æ–¹å¼
- âœ… æ¸…æ™°çš„è®¢å•çŠ¶æ€å’Œæ“ä½œæŒ‰é’®
- âœ… å·®å¼‚åŒ–å®šä»·ï¼Œæå‡å•†ä¸šä»·å€¼

## ğŸ§ª æµ‹è¯•éªŒè¯

### 1. ç•Œé¢æµ‹è¯•
- âœ… ç­›é€‰æ ‡ç­¾åœ¨å„ç§å±å¹•å°ºå¯¸ä¸‹æ­£å¸¸æ˜¾ç¤º
- âœ… æ”¯ä»˜æŒ‰é’®æ­£ç¡®æ˜¾ç¤ºå’Œéšè—
- âœ… è®¢å•çŠ¶æ€æ­£ç¡®å±•ç¤º

### 2. åŠŸèƒ½æµ‹è¯•
- âœ… ç”³è¯·æäº¤åè‡ªåŠ¨åˆ›å»ºè®¢å•
- âœ… æ”¯ä»˜æµç¨‹å®Œæ•´å¯ç”¨
- âœ… è®¢å•çŠ¶æ€æ­£ç¡®æ›´æ–°
- âœ… ä»·æ ¼æ ¹æ®çº¢å¨˜ç­‰çº§æ­£ç¡®è®¡ç®—

### 3. ç”¨æˆ·ä½“éªŒæµ‹è¯•
- âœ… æ“ä½œæµç¨‹é¡ºç•…
- âœ… åé¦ˆä¿¡æ¯åŠæ—¶å‡†ç¡®
- âœ… é”™è¯¯å¤„ç†å‹å¥½

## âœ… æ€»ç»“

é€šè¿‡è¿™æ¬¡ä¿®å¤ï¼š

1. **è§£å†³äº†ç•Œé¢é—®é¢˜**ï¼šç­›é€‰æ ‡ç­¾æ˜¾ç¤ºå®Œæ•´ï¼Œæ”¯æŒæ¨ªå‘æ»šåŠ¨
2. **å®Œå–„äº†æ”¯ä»˜æµç¨‹**ï¼šä»ç”³è¯·åˆ°æ”¯ä»˜çš„å®Œæ•´é—­ç¯
3. **ä¼˜åŒ–äº†ç”¨æˆ·ä½“éªŒ**ï¼šæ¸…æ™°çš„çŠ¶æ€å±•ç¤ºå’Œæ“ä½œå¼•å¯¼
4. **å¢å¼ºäº†å•†ä¸šä»·å€¼**ï¼šå·®å¼‚åŒ–å®šä»·ç­–ç•¥

ç°åœ¨ç”¨æˆ·å¯ä»¥å®Œæ•´åœ°ä½¿ç”¨çº¢å¨˜æœåŠ¡ï¼šå‘èµ·ç”³è¯· â†’ åˆ›å»ºè®¢å• â†’ å®Œæˆæ”¯ä»˜ â†’ äº«å—æœåŠ¡ï¼
