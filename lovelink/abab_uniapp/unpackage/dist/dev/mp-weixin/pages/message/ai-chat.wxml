<view class="ai-chat-page data-v-0694ab06"><view class="bg-layer data-v-0694ab06"><view class="bg-gradient data-v-0694ab06"></view></view><view class="nav-bar data-v-0694ab06"><view class="nav-left data-v-0694ab06" bindtap="{{a}}"><text class="back-icon data-v-0694ab06">←</text></view><view class="nav-center data-v-0694ab06"><view class="ai-info data-v-0694ab06"><image class="ai-avatar-small data-v-0694ab06" src="{{b}}" mode="aspectFill" binderror="{{c}}"></image><view wx:if="{{d}}" class="avatar-placeholder-small data-v-0694ab06"><text class="avatar-text-small data-v-0694ab06">🤖</text></view><view class="ai-details data-v-0694ab06"><text class="ai-name data-v-0694ab06">{{e}}</text><text class="ai-status data-v-0694ab06">{{f}}</text></view></view></view><view class="nav-right data-v-0694ab06"><text class="more-icon data-v-0694ab06" bindtap="{{g}}">⋯</text></view></view><scroll-view class="chat-container data-v-0694ab06" scroll-y scroll-top="{{o}}" bindscrolltoupper="{{p}}"><view wx:if="{{h}}" class="welcome-message data-v-0694ab06"><view class="ai-message-item data-v-0694ab06"><image class="message-avatar data-v-0694ab06" src="{{i}}" mode="aspectFill"></image><view class="message-bubble ai-bubble data-v-0694ab06"><text class="message-text data-v-0694ab06">{{j}}</text><text class="message-time data-v-0694ab06">{{k}}</text></view></view></view><view class="message-list data-v-0694ab06"><view wx:for="{{l}}" wx:for-item="message" wx:key="j" class="{{['message-item', 'data-v-0694ab06', message.k && 'user-message', message.l && 'ai-message']}}"><block wx:if="{{message.a}}"><image class="message-avatar data-v-0694ab06" src="{{message.b}}" mode="aspectFill"></image><view class="message-bubble ai-bubble data-v-0694ab06"><text class="message-text data-v-0694ab06"><rich-text class="data-v-0694ab06" nodes="{{message.c}}"/></text><view class="message-actions data-v-0694ab06"><text class="action-btn data-v-0694ab06" bindtap="{{message.d}}">🔊</text><text class="action-btn data-v-0694ab06" bindtap="{{message.e}}">📋</text></view><text class="message-time data-v-0694ab06">{{message.f}}</text></view></block><block wx:else><view class="message-bubble user-bubble data-v-0694ab06"><text class="message-text data-v-0694ab06">{{message.g}}</text><text class="message-time data-v-0694ab06">{{message.h}}</text></view><image class="message-avatar user-avatar data-v-0694ab06" src="{{message.i}}" mode="aspectFill"></image></block></view><view wx:if="{{m}}" class="ai-message-item typing-indicator data-v-0694ab06"><image class="message-avatar data-v-0694ab06" src="{{n}}" mode="aspectFill"></image><view class="message-bubble ai-bubble typing-bubble data-v-0694ab06"><view class="typing-dots data-v-0694ab06"><view class="dot data-v-0694ab06"></view><view class="dot data-v-0694ab06"></view><view class="dot data-v-0694ab06"></view></view></view></view></view></scroll-view><view class="input-area data-v-0694ab06"><view wx:if="{{q}}" class="function-buttons data-v-0694ab06"><view class="function-btn data-v-0694ab06" bindtap="{{r}}"><text class="btn-icon data-v-0694ab06">📷</text><text class="btn-text data-v-0694ab06">图片</text></view><view class="function-btn data-v-0694ab06" bindtap="{{s}}"><text class="btn-icon data-v-0694ab06">🎤</text><text class="btn-text data-v-0694ab06">语音</text></view><view class="function-btn data-v-0694ab06" bindtap="{{t}}"><text class="btn-icon data-v-0694ab06">🎨</text><text class="btn-text data-v-0694ab06">文生图</text></view><view class="function-btn data-v-0694ab06" bindtap="{{v}}"><text class="btn-icon data-v-0694ab06">💕</text><text class="btn-text data-v-0694ab06">匹配建议</text></view></view><view class="input-container data-v-0694ab06"><view class="input-left data-v-0694ab06"><text class="function-toggle data-v-0694ab06" bindtap="{{x}}">{{w}}</text></view><view wx:if="{{y}}" class="text-input-area data-v-0694ab06"><block wx:if="{{r0}}"><textarea class="message-input data-v-0694ab06" placeholder="输入消息..." auto-height="{{true}}" maxlength="{{500}}" bindinput="{{z}}" value="{{A}}"></textarea></block></view><view wx:else class="voice-input-area data-v-0694ab06"><view class="{{['voice-btn', 'data-v-0694ab06', C && 'recording']}}" bindtouchstart="{{D}}" bindtouchend="{{E}}" bindtouchcancel="{{F}}"><text class="voice-text data-v-0694ab06">{{B}}</text></view></view><view class="input-right data-v-0694ab06"><view wx:if="{{G}}" class="send-btn data-v-0694ab06" bindtap="{{H}}"><text class="send-icon data-v-0694ab06">→</text></view><view wx:else class="voice-toggle data-v-0694ab06" bindtap="{{J}}"><text class="voice-icon data-v-0694ab06">{{I}}</text></view></view></view></view><uni-popup wx:if="{{P}}" class="r data-v-0694ab06" u-s="{{['d']}}" u-r="morePopup" u-i="0694ab06-0" bind:__l="__l" u-p="{{P}}"><view class="more-options data-v-0694ab06"><view class="option-item data-v-0694ab06" bindtap="{{K}}"><text class="option-icon data-v-0694ab06">🗑️</text><text class="option-text data-v-0694ab06">清空聊天记录</text></view><view class="option-item data-v-0694ab06" bindtap="{{L}}"><text class="option-icon data-v-0694ab06">📤</text><text class="option-text data-v-0694ab06">导出聊天记录</text></view><view class="option-item data-v-0694ab06" bindtap="{{M}}"><text class="option-icon data-v-0694ab06">⚙️</text><text class="option-text data-v-0694ab06">AI设置</text></view><view class="option-item cancel data-v-0694ab06" bindtap="{{N}}"><text class="option-text data-v-0694ab06">取消</text></view></view></uni-popup></view>