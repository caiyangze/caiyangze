<view class="ai-chat-page data-v-adec415e"><view class="bg-layer data-v-adec415e"><view class="bg-gradient data-v-adec415e"></view></view><view class="content-container data-v-adec415e"><view class="header data-v-adec415e"><view class="back-button data-v-adec415e" bindtap="{{a}}"><text class="back-icon data-v-adec415e">←</text></view><view class="ai-info data-v-adec415e"><image class="ai-avatar data-v-adec415e" src="{{b}}" mode="aspectFill"></image><view class="ai-details data-v-adec415e"><text class="ai-name data-v-adec415e">小红娘</text><text class="ai-status data-v-adec415e">在线</text></view></view><view class="header-actions data-v-adec415e"><text class="action-icon data-v-adec415e" bindtap="{{c}}">🎵</text><text class="action-icon data-v-adec415e" bindtap="{{d}}">ℹ️</text></view></view><scroll-view class="message-list data-v-adec415e" scroll-y scroll-into-view="{{h}}" scroll-top="{{i}}"><view wx:if="{{e}}" class="welcome-message data-v-adec415e"><view class="ai-message-item data-v-adec415e"><image class="message-avatar data-v-adec415e" src="{{f}}" mode="aspectFill"></image><view class="message-content ai-content data-v-adec415e"><text class="message-text data-v-adec415e">您好！我是小红娘，您的专属AI红娘助手 💕</text><text class="message-text data-v-adec415e">我可以为您提供：</text><text class="message-text data-v-adec415e">💬 情感咨询和建议</text><text class="message-text data-v-adec415e">🎵 语音交流</text><text class="message-text data-v-adec415e">🖼️ 图片分析</text><text class="message-text data-v-adec415e">🎨 图片生成</text><text class="message-text data-v-adec415e">有什么可以帮助您的吗？</text></view></view></view><view wx:for="{{g}}" wx:for-item="message" wx:key="x" id="{{message.y}}" class="{{['message-item', 'data-v-adec415e', message.z && 'message-self']}}"><view wx:if="{{message.a}}" class="time-divider data-v-adec415e"><text class="data-v-adec415e">{{message.b}}</text></view><view wx:if="{{message.c}}" class="ai-message-item data-v-adec415e"><image class="message-avatar data-v-adec415e" src="{{message.d}}" mode="aspectFill"></image><view class="message-content ai-content data-v-adec415e"><view wx:if="{{message.e}}" class="text-message data-v-adec415e"><text class="message-text data-v-adec415e">{{message.f}}</text><view wx:if="{{message.g}}" class="voice-controls data-v-adec415e"><text class="voice-btn data-v-adec415e" bindtap="{{message.i}}">{{message.h}} 播放语音 </text></view></view><view wx:if="{{message.j}}" class="image-message data-v-adec415e"><image class="data-v-adec415e" src="{{message.k}}" mode="aspectFit" bindtap="{{message.l}}"></image></view><view wx:if="{{message.m}}" class="loading-message data-v-adec415e"><text class="loading-text data-v-adec415e">{{message.n}}</text><view class="loading-dots data-v-adec415e"><text class="dot data-v-adec415e">●</text><text class="dot data-v-adec415e">●</text><text class="dot data-v-adec415e">●</text></view></view></view></view><view wx:else class="user-message-item data-v-adec415e"><view class="message-content user-content data-v-adec415e"><view wx:if="{{message.o}}" class="text-message data-v-adec415e"><text class="message-text data-v-adec415e">{{message.p}}</text></view><view wx:if="{{message.q}}" class="image-message data-v-adec415e"><image class="data-v-adec415e" src="{{message.r}}" mode="aspectFit" bindtap="{{message.s}}"></image></view><view wx:if="{{message.t}}" class="voice-message data-v-adec415e"><text class="voice-duration data-v-adec415e">🎤 {{message.v}}s</text></view></view><image class="message-avatar data-v-adec415e" src="{{message.w}}" mode="aspectFill"></image></view></view></scroll-view><view class="input-area data-v-adec415e"><view class="input-container data-v-adec415e"><view class="input-tools data-v-adec415e"><text class="tool-icon data-v-adec415e" bindtap="{{j}}">📷</text><text class="tool-icon data-v-adec415e" bindtap="{{k}}">🎤</text><text class="tool-icon data-v-adec415e" bindtap="{{l}}">🎨</text></view><input wx:if="{{m}}" class="message-input data-v-adec415e" placeholder="和小红娘聊聊吧..." bindfocus="{{n}}" bindblur="{{o}}" bindconfirm="{{p}}" value="{{q}}" bindinput="{{r}}"/><view wx:else class="voice-input data-v-adec415e" bindtouchstart="{{t}}" bindtouchend="{{v}}"><text class="voice-text data-v-adec415e">{{s}}</text></view><view class="{{['send-button', 'data-v-adec415e', w && 'active']}}" bindtap="{{x}}"><text class="data-v-adec415e">发送</text></view></view></view></view><view wx:if="{{y}}" class="voice-panel data-v-adec415e" bindtap="{{C}}"><view class="panel-content data-v-adec415e" catchtap="{{B}}"><view class="panel-header data-v-adec415e"><text class="panel-title data-v-adec415e">语音设置</text><text class="close-btn data-v-adec415e" bindtap="{{z}}">×</text></view><view class="voice-options data-v-adec415e"><text class="option-label data-v-adec415e">选择小红娘的声音：</text><view class="voice-list data-v-adec415e"><view wx:for="{{A}}" wx:for-item="voice" wx:key="c" class="{{['voice-item', 'data-v-adec415e', voice.d && 'active']}}" bindtap="{{voice.e}}"><text class="voice-name data-v-adec415e">{{voice.a}}</text><text class="voice-desc data-v-adec415e">{{voice.b}}</text></view></view></view></view></view><view wx:if="{{D}}" class="image-panel data-v-adec415e" bindtap="{{J}}"><view class="panel-content data-v-adec415e" catchtap="{{I}}"><view class="panel-header data-v-adec415e"><text class="panel-title data-v-adec415e">AI绘画</text><text class="close-btn data-v-adec415e" bindtap="{{E}}">×</text></view><view class="image-generate data-v-adec415e"><block wx:if="{{r0}}"><textarea class="image-prompt data-v-adec415e" placeholder="描述您想要生成的图片..." maxlength="200" value="{{F}}" bindinput="{{G}}"></textarea></block><view class="generate-actions data-v-adec415e"><view class="generate-btn data-v-adec415e" bindtap="{{H}}"><text class="data-v-adec415e">生成图片</text></view></view></view></view></view></view>