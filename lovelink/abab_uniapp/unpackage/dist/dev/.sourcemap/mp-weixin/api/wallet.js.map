{"version":3,"file":"wallet.js","sources":["api/wallet.js"],"sourcesContent":["/**\r\n * 钱包相关API\r\n */\r\nimport http from './http';\r\n\r\n// API基础路径\r\nconst BASE_PATH = '/wallet';\r\n\r\n/**\r\n * 获取用户钱包信息\r\n * @returns {Promise} 返回包含钱包信息的Promise\r\n */\r\nexport const getWalletInfo = () => {\r\n  return http.get(`${BASE_PATH}/info`);\r\n};\r\n\r\n/**\r\n * 获取钱包交易记录\r\n * @param {Number} pageNum 页码\r\n * @param {Number} pageSize 每页大小\r\n * @param {Number} type 交易类型（可选）1-充值，2-消费，3-收入，4-提现，5-退款\r\n * @returns {Promise} 返回包含交易记录的Promise\r\n */\r\nexport const getTransactions = (pageNum = 1, pageSize = 20, type = null) => {\r\n  const params = { pageNum, pageSize };\r\n  if (type !== null) {\r\n    params.type = type;\r\n  }\r\n  return http.get(`${BASE_PATH}/transactions`, params);\r\n};\r\n\r\n/**\r\n * 虚拟币充值\r\n * @param {Object} data 充值信息\r\n * @param {Number} data.coinAmount 充值虚拟币数量\r\n * @param {String} data.transactionDesc 交易描述\r\n * @param {String} data.relatedId 关联订单号\r\n * @param {Number} data.paymentMethod 支付方式 1-支付宝，2-微信，3-银行卡\r\n * @returns {Promise} 返回充值结果的Promise\r\n */\r\nexport const recharge = (data) => {\r\n  return http.post(`${BASE_PATH}/recharge`, data);\r\n};\r\n\r\n/**\r\n * 虚拟币消费\r\n * @param {Object} data 消费信息\r\n * @param {Number} data.coinAmount 消费虚拟币数量\r\n * @param {String} data.transactionDesc 交易描述\r\n * @param {String} data.relatedId 关联订单号\r\n * @param {Number} data.voucherOrderId 优惠券订单ID（可选）\r\n * @param {Number} data.voucherDiscountAmount 优惠券抵扣金额（可选）\r\n * @returns {Promise} 返回消费结果的Promise\r\n */\r\nexport const consume = (data) => {\r\n  return http.post(`${BASE_PATH}/consume`, data);\r\n};\r\n\r\n/**\r\n * 现金收入\r\n * @param {Object} data 收入信息\r\n * @param {Number} data.transactionAmount 收入金额\r\n * @param {String} data.transactionDesc 交易描述\r\n * @param {String} data.relatedId 关联订单号\r\n * @returns {Promise} 返回收入结果的Promise\r\n */\r\nexport const income = (data) => {\r\n  return http.post(`${BASE_PATH}/income`, data);\r\n};\r\n\r\n/**\r\n * 现金提现申请\r\n * @param {Object} data 提现信息\r\n * @param {Number} data.transactionAmount 提现金额\r\n * @param {String} data.withdrawAccount 提现账户\r\n * @param {Number} data.withdrawAccountType 提现账户类型 1-支付宝，2-微信，3-银行卡\r\n * @param {String} data.withdrawAccountName 提现账户姓名\r\n * @param {String} data.transactionDesc 交易描述\r\n * @returns {Promise} 返回提现申请结果的Promise\r\n */\r\nexport const withdraw = (data) => {\r\n  return http.post(`${BASE_PATH}/withdraw`, data);\r\n};\r\n\r\n/**\r\n * 获取钱包统计信息\r\n * @returns {Promise} 返回包含统计信息的Promise\r\n */\r\nexport const getStatistics = () => {\r\n  return http.get(`${BASE_PATH}/statistics`);\r\n};\r\n\r\n/**\r\n * 检查钱包状态\r\n * @returns {Promise} 返回钱包状态检查结果的Promise\r\n */\r\nexport const checkWalletStatus = () => {\r\n  return http.get(`${BASE_PATH}/status`);\r\n};\r\n\r\n/**\r\n * 获取充值套餐列表（模拟数据，实际应该从后端获取）\r\n * @returns {Array} 充值套餐列表\r\n */\r\nexport const getRechargePackages = () => {\r\n  return [\r\n    { id: 1, coinAmount: 100, price: 10, bonus: 0, desc: '100虚拟币' },\r\n    { id: 2, coinAmount: 500, price: 50, bonus: 50, desc: '500虚拟币+50赠送' },\r\n    { id: 3, coinAmount: 1000, price: 100, bonus: 150, desc: '1000虚拟币+150赠送' },\r\n    { id: 4, coinAmount: 2000, price: 200, bonus: 400, desc: '2000虚拟币+400赠送' },\r\n    { id: 5, coinAmount: 5000, price: 500, bonus: 1200, desc: '5000虚拟币+1200赠送' },\r\n    { id: 6, coinAmount: 10000, price: 1000, bonus: 3000, desc: '10000虚拟币+3000赠送' }\r\n  ];\r\n};\r\n\r\n/**\r\n * 获取交易类型描述\r\n * @param {Number} type 交易类型\r\n * @returns {String} 交易类型描述\r\n */\r\nexport const getTransactionTypeDesc = (type) => {\r\n  const typeMap = {\r\n    1: '充值',\r\n    2: '消费',\r\n    3: '收入',\r\n    4: '提现',\r\n    5: '退款'\r\n  };\r\n  return typeMap[type] || '未知';\r\n};\r\n\r\n/**\r\n * 获取支付方式描述\r\n * @param {Number} method 支付方式\r\n * @returns {String} 支付方式描述\r\n */\r\nexport const getPaymentMethodDesc = (method) => {\r\n  const methodMap = {\r\n    1: '支付宝',\r\n    2: '微信支付',\r\n    3: '银行卡'\r\n  };\r\n  return methodMap[method] || '未知';\r\n};\r\n\r\n/**\r\n * 格式化金额显示\r\n * @param {Number} amount 金额\r\n * @param {String} unit 单位\r\n * @returns {String} 格式化后的金额\r\n */\r\nexport const formatAmount = (amount, unit = '元') => {\r\n  if (amount === null || amount === undefined) {\r\n    return `0${unit}`;\r\n  }\r\n  \r\n  if (unit === '币') {\r\n    return `${amount}${unit}`;\r\n  }\r\n  \r\n  return `${parseFloat(amount).toFixed(2)}${unit}`;\r\n};\r\n\r\n/**\r\n * 验证提现金额\r\n * @param {Number} amount 提现金额\r\n * @param {Number} balance 当前余额\r\n * @returns {Object} 验证结果\r\n */\r\nexport const validateWithdrawAmount = (amount, balance) => {\r\n  if (!amount || amount <= 0) {\r\n    return { valid: false, message: '请输入有效的提现金额' };\r\n  }\r\n  \r\n  if (amount < 10) {\r\n    return { valid: false, message: '提现金额不能少于10元' };\r\n  }\r\n  \r\n  if (amount > balance) {\r\n    return { valid: false, message: '提现金额不能超过当前余额' };\r\n  }\r\n  \r\n  return { valid: true, message: '验证通过' };\r\n};\r\n\r\n/**\r\n * 验证充值数量\r\n * @param {Number} coinAmount 充值虚拟币数量\r\n * @returns {Object} 验证结果\r\n */\r\nexport const validateRechargeAmount = (coinAmount) => {\r\n  if (!coinAmount || coinAmount <= 0) {\r\n    return { valid: false, message: '请选择充值套餐' };\r\n  }\r\n  \r\n  if (coinAmount < 10) {\r\n    return { valid: false, message: '最少充值10虚拟币' };\r\n  }\r\n  \r\n  return { valid: true, message: '验证通过' };\r\n};\r\n\r\nexport default {\r\n  getWalletInfo,\r\n  getTransactions,\r\n  recharge,\r\n  consume,\r\n  income,\r\n  withdraw,\r\n  getStatistics,\r\n  checkWalletStatus,\r\n  getRechargePackages,\r\n  getTransactionTypeDesc,\r\n  getPaymentMethodDesc,\r\n  formatAmount,\r\n  validateWithdrawAmount,\r\n  validateRechargeAmount\r\n};\r\n"],"names":["http"],"mappings":";;AAMA,MAAM,YAAY;AAMN,MAAC,gBAAgB,MAAM;AACjC,SAAOA,SAAAA,KAAK,IAAI,GAAG,SAAS,OAAO;AACrC;AASY,MAAC,kBAAkB,CAAC,UAAU,GAAG,WAAW,IAAI,OAAO,SAAS;AAC1E,QAAM,SAAS,EAAE,SAAS;AAC1B,MAAI,SAAS,MAAM;AACjB,WAAO,OAAO;AAAA,EACf;AACD,SAAOA,SAAAA,KAAK,IAAI,GAAG,SAAS,iBAAiB,MAAM;AACrD;AAWY,MAAC,WAAW,CAAC,SAAS;AAChC,SAAOA,SAAAA,KAAK,KAAK,GAAG,SAAS,aAAa,IAAI;AAChD;AAYY,MAAC,UAAU,CAAC,SAAS;AAC/B,SAAOA,SAAAA,KAAK,KAAK,GAAG,SAAS,YAAY,IAAI;AAC/C;AAwBY,MAAC,WAAW,CAAC,SAAS;AAChC,SAAOA,SAAAA,KAAK,KAAK,GAAG,SAAS,aAAa,IAAI;AAChD;AAsBY,MAAC,sBAAsB,MAAM;AACvC,SAAO;AAAA,IACL,EAAE,IAAI,GAAG,YAAY,KAAK,OAAO,IAAI,OAAO,GAAG,MAAM,SAAU;AAAA,IAC/D,EAAE,IAAI,GAAG,YAAY,KAAK,OAAO,IAAI,OAAO,IAAI,MAAM,cAAe;AAAA,IACrE,EAAE,IAAI,GAAG,YAAY,KAAM,OAAO,KAAK,OAAO,KAAK,MAAM,gBAAiB;AAAA,IAC1E,EAAE,IAAI,GAAG,YAAY,KAAM,OAAO,KAAK,OAAO,KAAK,MAAM,gBAAiB;AAAA,IAC1E,EAAE,IAAI,GAAG,YAAY,KAAM,OAAO,KAAK,OAAO,MAAM,MAAM,iBAAkB;AAAA,IAC5E,EAAE,IAAI,GAAG,YAAY,KAAO,OAAO,KAAM,OAAO,KAAM,MAAM,kBAAmB;AAAA,EACnF;AACA;AAsCY,MAAC,eAAe,CAAC,QAAQ,OAAO,QAAQ;AAClD,MAAI,WAAW,QAAQ,WAAW,QAAW;AAC3C,WAAO,IAAI,IAAI;AAAA,EAChB;AAED,MAAI,SAAS,KAAK;AAChB,WAAO,GAAG,MAAM,GAAG,IAAI;AAAA,EACxB;AAED,SAAO,GAAG,WAAW,MAAM,EAAE,QAAQ,CAAC,CAAC,GAAG,IAAI;AAChD;;;;;;;;"}
