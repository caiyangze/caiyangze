{"version":3,"file":"chat.js","sources":["api/chat.js"],"sourcesContent":["/**\r\n * 聊天相关API\r\n */\r\n\r\nimport http from './http';\r\n\r\n/**\r\n * 检查是否可以与指定用户聊天\r\n * @param {Number} targetUserId 目标用户ID\r\n */\r\nexport const canChat = (targetUserId) => {\r\n  return http.get(`/chat/canChat/${targetUserId}`);\r\n};\r\n\r\n/**\r\n * 获取会话列表\r\n */\r\nexport const getConversationList = () => {\r\n  return http.get('/chat/conversations');\r\n};\r\n\r\n/**\r\n * 获取聊天记录\r\n * @param {Number} conversationId 会话ID\r\n * @param {Number} page 页码\r\n * @param {Number} size 每页大小\r\n */\r\nexport const getChatHistory = (conversationId, page = 1, size = 20) => {\r\n  return http.get(`/chat/history/${conversationId}`, {\r\n    page,\r\n    size\r\n  });\r\n};\r\n\r\n/**\r\n * 发送消息（HTTP接口，用于文件上传等场景）\r\n * @param {Object} messageData 消息数据\r\n */\r\nexport const sendMessage = (messageData) => {\r\n  return http.post('/chat/send', messageData);\r\n};\r\n\r\n/**\r\n * 标记消息为已读\r\n * @param {Number} conversationId 会话ID\r\n * @param {Number} messageId 消息ID\r\n */\r\nexport const markMessageAsRead = (conversationId, messageId) => {\r\n  return http.post('/chat/read', {\r\n    conversationId,\r\n    messageId\r\n  });\r\n};\r\n\r\n/**\r\n * 撤回消息\r\n * @param {Number} messageId 消息ID\r\n */\r\nexport const recallMessage = (messageId) => {\r\n  return http.post(`/chat/recall/${messageId}`);\r\n};\r\n\r\n/**\r\n * 删除会话\r\n * @param {Number} conversationId 会话ID\r\n */\r\nexport const deleteConversation = (conversationId) => {\r\n  return http.del(`/chat/conversation/${conversationId}`);\r\n};\r\n\r\n/**\r\n * 获取用户在线状态\r\n * @param {Number} userId 用户ID\r\n */\r\nexport const getOnlineStatus = (userId) => {\r\n  return http.get(`/chat/online/${userId}`);\r\n};\r\n\r\n/**\r\n * 获取在线用户统计\r\n */\r\nexport const getOnlineStats = () => {\r\n  return http.get('/chat/stats');\r\n};\r\n\r\n/**\r\n * 获取互相关注的好友列表\r\n */\r\nexport const getMutualFollowList = () => {\r\n  return http.get('/follow/mutual');\r\n};\r\n\r\n/**\r\n * 批量获取用户在线状态\r\n * @param {Array} userIds 用户ID数组\r\n */\r\nexport const getBatchOnlineStatus = (userIds) => {\r\n  return http.post('/chat/batchOnlineStatus', { userIds });\r\n};\r\n\r\n/**\r\n * 获取未读消息数量\r\n * @param {Array} userIds 用户ID数组\r\n */\r\nexport const getUnreadCounts = (userIds) => {\r\n  return http.post('/chat/unreadCounts', { userIds });\r\n};\r\n\r\n/**\r\n * 测试接口\r\n */\r\nexport const testChatApi = (data) => {\r\n  return http.post('/chat/test', data);\r\n};\r\n"],"names":["http"],"mappings":";;;AAUY,MAAC,UAAU,CAAC,iBAAiB;AACvC,SAAOA,SAAAA,KAAK,IAAI,iBAAiB,YAAY,EAAE;AACjD;AAKY,MAAC,sBAAsB,MAAM;AACvC,SAAOA,SAAI,KAAC,IAAI,qBAAqB;AACvC;AAQY,MAAC,iBAAiB,CAAC,gBAAgB,OAAO,GAAG,OAAO,OAAO;AACrE,SAAOA,SAAI,KAAC,IAAI,iBAAiB,cAAc,IAAI;AAAA,IACjD;AAAA,IACA;AAAA,EACJ,CAAG;AACH;AAMY,MAAC,cAAc,CAAC,gBAAgB;AAC1C,SAAOA,cAAK,KAAK,cAAc,WAAW;AAC5C;AAOY,MAAC,oBAAoB,CAAC,gBAAgB,cAAc;AAC9D,SAAOA,SAAI,KAAC,KAAK,cAAc;AAAA,IAC7B;AAAA,IACA;AAAA,EACJ,CAAG;AACH;AAMY,MAAC,gBAAgB,CAAC,cAAc;AAC1C,SAAOA,SAAAA,KAAK,KAAK,gBAAgB,SAAS,EAAE;AAC9C;AAMY,MAAC,qBAAqB,CAAC,mBAAmB;AACpD,SAAOA,SAAAA,KAAK,IAAI,sBAAsB,cAAc,EAAE;AACxD;AAMY,MAAC,kBAAkB,CAAC,WAAW;AACzC,SAAOA,SAAAA,KAAK,IAAI,gBAAgB,MAAM,EAAE;AAC1C;AAKY,MAAC,iBAAiB,MAAM;AAClC,SAAOA,SAAI,KAAC,IAAI,aAAa;AAC/B;AAKY,MAAC,sBAAsB,MAAM;AACvC,SAAOA,SAAI,KAAC,IAAI,gBAAgB;AAClC;AAMY,MAAC,uBAAuB,CAAC,YAAY;AAC/C,SAAOA,SAAI,KAAC,KAAK,2BAA2B,EAAE,QAAS,CAAA;AACzD;AAMY,MAAC,kBAAkB,CAAC,YAAY;AAC1C,SAAOA,SAAI,KAAC,KAAK,sBAAsB,EAAE,QAAS,CAAA;AACpD;AAKY,MAAC,cAAc,CAAC,SAAS;AACnC,SAAOA,cAAK,KAAK,cAAc,IAAI;AACrC;;;;;;;;;;;;;;"}
