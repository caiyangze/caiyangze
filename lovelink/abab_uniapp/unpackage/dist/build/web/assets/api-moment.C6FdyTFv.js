import{N as e,g as t,U as o}from"./index-BpPI9udZ.js";const m="http://localhost:9002",a={createMoment(t,o=[]){const a=new FormData;return a.append("content",t.content),t.location&&a.append("location",t.location),t.visibility&&a.append("visibility",t.visibility),o.forEach(((e,t)=>{a.append("mediaFiles",e)})),e.request({url:`${m}/api/social/moment/create`,method:"POST",data:a,header:{"Content-Type":"multipart/form-data"}})},uploadMomentImage:e=>new Promise(((a,i)=>{const n=t("token")||"";o({url:m+"/api/social/file/upload/moment",filePath:e,name:"file",header:{token:n},success:e=>{try{const t=JSON.parse(e.data);a(t)}catch(t){i(t)}},fail:e=>{i(e)}})})),uploadMomentImages:async function(e){const t=e.map((e=>this.uploadMomentImage(e)));return Promise.all(t)},getPublicMoments:(t=1,o=10)=>e.request({url:`${m}/api/social/moment/public?pageNum=${t}&pageSize=${o}`,method:"GET"}),getMyMoments:(t=1,o=10)=>e.request({url:`${m}/api/social/moment/mine?pageNum=${t}&pageSize=${o}`,method:"GET"}),getMomentDetail:t=>e.request({url:`${m}/api/social/moment/detail/${t}`,method:"GET"}),updateMoment:t=>e.request({url:`${m}/api/social/moment/update`,method:"PUT",data:t}),deleteMoment:t=>e.request({url:`${m}/api/social/moment/delete/${t}`,method:"DELETE"}),updateMomentVisibility:(t,o)=>e.request({url:`${m}/api/social/moment/visibility/${t}?visibility=${o}`,method:"PUT"}),likeMoment:t=>e.request({url:`${m}/api/social/moment/like/${t}`,method:"POST"}),getMomentComments:(t,o=1,a=10)=>e.request({url:`${m}/api/social/moment/comments/${t}?pageNum=${o}&pageSize=${a}`,method:"GET"}),addMomentComment:(t,o)=>e.request({url:`${m}/api/social/moment/comment`,method:"POST",data:{momentId:t,content:o}}),incrementViewCount:t=>e.request({url:`${m}/api/social/moment/view/${t}`,method:"POST"}),getCommentList(e,t=1,o=20){return this.getMomentComments(e,t,o)},addComment(e,t){return this.addMomentComment(e,t)}};export{a as default};
