function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/api-chat.BF5K77Hj.js","assets/index-BpPI9udZ.js","assets/index-DMIaa8Q1.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{_ as a,s as t,X as e,p as s,b as l,H as c,d as r,w as n,i as u,f as i,h as o,j as d,t as h,a3 as f,q as m,u as _}from"./index-BpPI9udZ.js";const g=a({data:()=>({matchResult:{userId:null,nickname:"",avatarUrl:"",gender:1,age:0},heartRate:0}),onLoad(a){if(a.result)try{this.matchResult=JSON.parse(decodeURIComponent(a.result)),console.log("匹配结果:",this.matchResult),this.animateHeartRate()}catch(e){console.error("解析匹配结果失败:",e),t({title:"数据解析失败",icon:"none"}),this.goBack()}else console.log("使用测试数据"),this.matchResult={userId:"test123",nickname:"阿巴阿巴",avatarUrl:"/static/message/default-avatar.png",gender:2,age:25},this.animateHeartRate()},methods:{goBack(){e()},animateHeartRate(){const a=Math.floor(26*Math.random())+70;let t=0;const e=a/30,s=setInterval((()=>{t+=e,t>=a&&(t=a,clearInterval(s)),this.heartRate=Math.floor(t)}),50)},viewProfile(){this.matchResult.userId&&s({url:`/pages/user/user-detail?userId=${this.matchResult.userId}`})},async sendMessage(){if(this.matchResult.userId)try{const a=await l((()=>import("./api-chat.BF5K77Hj.js")),__vite__mapDeps([0,1,2])),e=await a.canChat(this.matchResult.userId);200===e.code?!0===e.data?s({url:`/pages/message/chat?userId=${this.matchResult.userId}&name=${encodeURIComponent(this.matchResult.nickname)}&avatar=${encodeURIComponent(this.matchResult.avatarUrl||"/static/message/default-avatar.png")}`}):c({title:"提示",content:"需要互相关注才能聊天哦～",showCancel:!1,confirmText:"知道了"}):t({title:e.message||"检查聊天权限失败",icon:"none"})}catch(a){console.error("检查聊天权限失败:",a),t({title:"网络错误，请重试",icon:"none"})}else t({title:"用户信息错误",icon:"none"})},rematch(){e({delta:1})},getDisplayAge(){return this.matchResult.age&&this.matchResult.age>0?this.matchResult.age:"未知"}}},[["render",function(a,t,e,s,l,c){const g=u,R=m,v=_;return i(),r(g,{class:"match-result-page"},{default:n((()=>[o(g,{class:"bg-layer"},{default:n((()=>[o(g,{class:"bg-gradient"}),o(g,{class:"floating-hearts"},{default:n((()=>[o(R,{class:"heart heart-1"},{default:n((()=>[d("💕")])),_:1}),o(R,{class:"heart heart-2"},{default:n((()=>[d("💖")])),_:1}),o(R,{class:"heart heart-3"},{default:n((()=>[d("💝")])),_:1}),o(R,{class:"heart heart-4"},{default:n((()=>[d("💗")])),_:1}),o(R,{class:"heart heart-5"},{default:n((()=>[d("💘")])),_:1})])),_:1})])),_:1}),o(g,{class:"content-container"},{default:n((()=>[o(g,{class:"nav-bar"},{default:n((()=>[o(g,{class:"nav-left",onClick:c.goBack},{default:n((()=>[o(R,{class:"nav-icon"},{default:n((()=>[d("←")])),_:1})])),_:1},8,["onClick"]),o(R,{class:"nav-title"},{default:n((()=>[d("匹配结果")])),_:1}),o(g,{class:"nav-right"})])),_:1}),o(g,{class:"main-content"},{default:n((()=>[o(g,{class:"success-section"},{default:n((()=>[o(g,{class:"success-icon"},{default:n((()=>[d("✨")])),_:1}),o(R,{class:"success-title"},{default:n((()=>[d("匹配成功！")])),_:1}),o(R,{class:"success-subtitle"},{default:n((()=>[d("为你找到了心动的TA")])),_:1})])),_:1}),o(g,{class:"user-card"},{default:n((()=>[o(g,{class:"user-avatar-container"},{default:n((()=>[o(v,{class:"user-avatar",src:l.matchResult.avatarUrl||"/static/message/default-avatar.png",mode:"aspectFill"},null,8,["src"]),o(g,{class:"avatar-border"})])),_:1}),o(g,{class:"user-info"},{default:n((()=>[o(R,{class:"user-name"},{default:n((()=>[d(h(l.matchResult.nickname),1)])),_:1}),o(g,{class:"user-details"},{default:n((()=>[o(R,{class:"user-age"},{default:n((()=>[d(h(c.getDisplayAge())+"岁",1)])),_:1}),o(R,{class:"user-gender"},{default:n((()=>[d(h(1===l.matchResult.gender?"♂":"♀"),1)])),_:1})])),_:1})])),_:1}),o(g,{class:"heart-rate"},{default:n((()=>[o(R,{class:"heart-rate-label"},{default:n((()=>[d("心动指数")])),_:1}),o(g,{class:"heart-rate-bar"},{default:n((()=>[o(g,{class:"heart-rate-fill",style:f({width:l.heartRate+"%"})},null,8,["style"])])),_:1}),o(R,{class:"heart-rate-value"},{default:n((()=>[d(h(l.heartRate)+"%",1)])),_:1})])),_:1})])),_:1}),o(g,{class:"action-buttons"},{default:n((()=>[o(g,{class:"action-btn secondary",onClick:c.viewProfile},{default:n((()=>[o(R,{class:"btn-icon"},{default:n((()=>[d("👤")])),_:1}),o(R,{class:"btn-text"},{default:n((()=>[d("查看资料")])),_:1})])),_:1},8,["onClick"]),o(g,{class:"action-btn primary",onClick:c.sendMessage},{default:n((()=>[o(R,{class:"btn-icon"},{default:n((()=>[d("💬")])),_:1}),o(R,{class:"btn-text"},{default:n((()=>[d("发送消息")])),_:1})])),_:1},8,["onClick"])])),_:1}),o(g,{class:"rematch-section"},{default:n((()=>[o(g,{class:"rematch-btn",onClick:c.rematch},{default:n((()=>[o(R,{class:"rematch-text"},{default:n((()=>[d("再次匹配")])),_:1}),o(R,{class:"rematch-icon"},{default:n((()=>[d("🔄")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-71584ffd"]]);export{g as default};
