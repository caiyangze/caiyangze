import{_ as l,z as s,s as e,p as t,d as o,w as a,i as n,f as i,h as r,j as c,l as d,m as u,F as f,k as w,q as g,t as h,A as m,B as _,u as F,K as p}from"./index-BpPI9udZ.js";import{a as y}from"./follow.vf4K-1PI.js";import{toggleUserFollow as v}from"./api-user-detail.fhFDcuKa.js";const L=l({data:()=>({followingList:[],loading:!1}),onLoad(){this.loadFollowingList()},onPullDownRefresh(){this.loadFollowingList().finally((()=>{s()}))},methods:{async loadFollowingList(){try{this.loading=!0;const l=await y();200===l.code?this.followingList=l.data||[]:e({title:l.message||"获取关注列表失败",icon:"none"})}catch(l){console.error("获取关注列表失败:",l),e({title:"网络错误，请重试",icon:"none"})}finally{this.loading=!1}},async handleFollow(l,s){try{this.$set(this.followingList[s],"loading",!0);const t=await v(l.user.userId);200===t.code?((1===l.isFollow||2===l.isFollow)&&(this.followingList[s].isFollow=0),e({title:t.message||"操作成功",icon:"success"})):e({title:t.message||"操作失败",icon:"none"})}catch(t){console.error("关注操作失败:",t),e({title:"网络错误，请重试",icon:"none"})}finally{this.$set(this.followingList[s],"loading",!1)}},goToUserDetail(l){l&&l.userId&&t({url:`/pages/user/user-detail?userId=${l.userId}`})},getGenderText(l){switch(l){case 1:return"男";case 2:return"女";default:return"未知"}},getFollowButtonClass(l){switch(l){case 0:default:return"follow-btn follow-btn-unfollow";case 1:return"follow-btn follow-btn-following";case 2:return"follow-btn follow-btn-mutual"}},getFollowButtonText(l){switch(l){case 0:default:return"关注";case 1:return"已关注";case 2:return"相互关注"}}}},[["render",function(l,s,e,t,y,v){const L=n,k=g,b=F,x=p;return i(),o(L,{class:"following-list-container"},{default:a((()=>[0!==y.followingList.length||y.loading?(i(),o(L,{key:1,class:"following-list"},{default:a((()=>[(i(!0),d(f,null,u(y.followingList,((l,s)=>(i(),o(L,{key:l.followId||s,class:"following-item",onClick:s=>v.goToUserDetail(l.user)},{default:a((()=>[r(L,{class:"avatar-container"},{default:a((()=>{var s;return[r(b,{src:(null==(s=l.user)?void 0:s.avatarUrl)||"/static/message/default-avatar.png",class:"user-avatar",mode:"aspectFill"},null,8,["src"])]})),_:2},1024),r(L,{class:"user-info"},{default:a((()=>[r(k,{class:"user-name"},{default:a((()=>{var s,e;return[c(h((null==(s=l.user)?void 0:s.nickname)||"用户"+(null==(e=l.user)?void 0:e.userId)),1)]})),_:2},1024),r(k,{class:"user-desc"},{default:a((()=>{var s;return[c(h(v.getGenderText(null==(s=l.user)?void 0:s.gender)),1)]})),_:2},1024)])),_:2},1024),r(L,{class:"follow-btn-container"},{default:a((()=>[r(x,{class:m(v.getFollowButtonClass(l.isFollow)),onClick:_((e=>v.handleFollow(l,s)),["stop"]),disabled:l.loading},{default:a((()=>[c(h(v.getFollowButtonText(l.isFollow)),1)])),_:2},1032,["class","onClick","disabled"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):(i(),o(L,{key:0,class:"empty-state"},{default:a((()=>[r(L,{class:"empty-icon"},{default:a((()=>[c("👥")])),_:1}),r(k,{class:"empty-text"},{default:a((()=>[c("暂无关注")])),_:1}),r(k,{class:"empty-desc"},{default:a((()=>[c("快去关注感兴趣的人吧")])),_:1})])),_:1})),y.loading?(i(),o(L,{key:2,class:"loading-container"},{default:a((()=>[r(L,{class:"loading-spinner"}),r(k,{class:"loading-text"},{default:a((()=>[c("加载中...")])),_:1})])),_:1})):w("",!0)])),_:1})}],["__scopeId","data-v-e6905ec7"]]);export{L as default};
