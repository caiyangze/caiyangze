import{_ as t,s as e,X as a,$ as s,d as l,w as i,i as r,f as d,h as o,j as u,A as n,t as c,k as f,q as _,K as m}from"./index-BpPI9udZ.js";import{b as D}from"./vip.Ckwwy0Q7.js";const h=t({data:()=>({orderId:null,orderDetail:{},loading:!0}),onLoad(t){t.orderId?(this.orderId=t.orderId,this.loadOrderDetail()):(e({title:"订单ID不能为空",icon:"none"}),setTimeout((()=>{a()}),1500))},methods:{async loadOrderDetail(){try{this.loading=!0;const t=await D(this.orderId);200===t.code?this.orderDetail=t.data:e({title:t.message||"获取订单详情失败",icon:"none"})}catch(t){console.error("获取订单详情失败:",t),e({title:"网络错误，请重试",icon:"none"})}finally{this.loading=!1}},getStatusClass(){switch(this.orderDetail.orderStatus){case 0:return"status-pending";case 1:return"status-success";case 2:return"status-cancelled";case 3:return"status-refunded";default:return"status-unknown"}},getStatusIcon(){switch(this.orderDetail.orderStatus){case 0:return"⏳";case 1:return"✅";case 2:return"❌";case 3:return"↩️";default:return"❓"}},getStatusText(){switch(this.orderDetail.orderStatus){case 0:return"待支付";case 1:return"支付成功";case 2:return"已取消";case 3:return"已退款";default:return"未知状态"}},getStatusDesc(){switch(this.orderDetail.orderStatus){case 0:return"请尽快完成支付";case 1:return"VIP会员已开通成功";case 2:return"订单已取消";case 3:return"订单已退款";default:return""}},formatDate(t){if(!t)return"";return new Date(t).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},getValidityDuration(){if(!this.orderDetail.startTime||!this.orderDetail.endTime)return"";const t=new Date(this.orderDetail.startTime),e=new Date(this.orderDetail.endTime),a=Math.abs(e-t),s=Math.ceil(a/864e5);return s>=365?`${Math.floor(s/365)}年`:s>=30?`${Math.floor(s/30)}个月`:`${s}天`},goBack(){a({delta:1})},goToVipCenter(){s({url:"/pages/index/index"})}}},[["render",function(t,e,a,s,D,h){const y=_,g=r,p=m;return d(),l(g,{class:"order-detail-page",style:{width:"100%","max-width":"none"}},{default:i((()=>[o(g,{class:"page-header"},{default:i((()=>[o(g,{class:"header-left"},{default:i((()=>[o(g,{class:"back-button",onClick:h.goBack},{default:i((()=>[o(y,{class:"back-icon"},{default:i((()=>[u("←")])),_:1})])),_:1},8,["onClick"])])),_:1}),o(y,{class:"page-title"},{default:i((()=>[u("VIP订单详情")])),_:1}),o(g,{class:"header-right"})])),_:1}),o(g,{class:"status-section"},{default:i((()=>[o(g,{class:n(["status-icon",h.getStatusClass()])},{default:i((()=>[o(y,{class:"status-emoji"},{default:i((()=>[u(c(h.getStatusIcon()),1)])),_:1})])),_:1},8,["class"]),o(y,{class:"status-text"},{default:i((()=>[u(c(h.getStatusText()),1)])),_:1}),o(y,{class:"status-desc"},{default:i((()=>[u(c(h.getStatusDesc()),1)])),_:1})])),_:1}),o(g,{class:"order-info-section"},{default:i((()=>[o(g,{class:"section-title"},{default:i((()=>[o(y,{class:"title-text"},{default:i((()=>[u("订单信息")])),_:1})])),_:1}),o(g,{class:"info-card",style:{width:"96%",margin:"0 auto"}},{default:i((()=>[o(g,{class:"info-item"},{default:i((()=>[o(y,{class:"info-label"},{default:i((()=>[u("订单号")])),_:1}),o(y,{class:"info-value"},{default:i((()=>[u(c(D.orderDetail.orderNo||"加载中..."),1)])),_:1})])),_:1}),o(g,{class:"info-item"},{default:i((()=>[o(y,{class:"info-label"},{default:i((()=>[u("VIP类型")])),_:1}),o(y,{class:"info-value"},{default:i((()=>[u(c(D.orderDetail.vipTypeName||"加载中..."),1)])),_:1})])),_:1}),o(g,{class:"info-item"},{default:i((()=>[o(y,{class:"info-label"},{default:i((()=>[u("订单金额")])),_:1}),o(y,{class:"info-value"},{default:i((()=>[u("¥"+c(D.orderDetail.amount||"0.00"),1)])),_:1})])),_:1}),o(g,{class:"info-item"},{default:i((()=>[o(y,{class:"info-label"},{default:i((()=>[u("实付金额")])),_:1}),o(y,{class:"info-value amount"},{default:i((()=>[u("¥"+c(D.orderDetail.payAmount||"0.00"),1)])),_:1})])),_:1}),D.orderDetail.discountAmount>0?(d(),l(g,{key:0,class:"info-item"},{default:i((()=>[o(y,{class:"info-label"},{default:i((()=>[u("优惠金额")])),_:1}),o(y,{class:"info-value discount"},{default:i((()=>[u("-¥"+c(D.orderDetail.discountAmount||"0.00"),1)])),_:1})])),_:1})):f("",!0),D.orderDetail.payTypeName?(d(),l(g,{key:1,class:"info-item"},{default:i((()=>[o(y,{class:"info-label"},{default:i((()=>[u("支付方式")])),_:1}),o(y,{class:"info-value"},{default:i((()=>[u(c(D.orderDetail.payTypeName),1)])),_:1})])),_:1})):f("",!0),D.orderDetail.payTime?(d(),l(g,{key:2,class:"info-item"},{default:i((()=>[o(y,{class:"info-label"},{default:i((()=>[u("支付时间")])),_:1}),o(y,{class:"info-value"},{default:i((()=>[u(c(h.formatDate(D.orderDetail.payTime)),1)])),_:1})])),_:1})):f("",!0),D.orderDetail.transactionId?(d(),l(g,{key:3,class:"info-item"},{default:i((()=>[o(y,{class:"info-label"},{default:i((()=>[u("交易号")])),_:1}),o(y,{class:"info-value transaction-id"},{default:i((()=>[u(c(D.orderDetail.transactionId),1)])),_:1})])),_:1})):f("",!0)])),_:1})])),_:1}),D.orderDetail.startTime&&D.orderDetail.endTime?(d(),l(g,{key:0,class:"validity-section"},{default:i((()=>[o(g,{class:"section-title"},{default:i((()=>[o(y,{class:"title-text"},{default:i((()=>[u("VIP有效期")])),_:1})])),_:1}),o(g,{class:"validity-card",style:{width:"96%",margin:"0 auto"}},{default:i((()=>[o(g,{class:"validity-item"},{default:i((()=>[o(y,{class:"validity-label"},{default:i((()=>[u("开始时间")])),_:1}),o(y,{class:"validity-value"},{default:i((()=>[u(c(h.formatDate(D.orderDetail.startTime)),1)])),_:1})])),_:1}),o(g,{class:"validity-item"},{default:i((()=>[o(y,{class:"validity-label"},{default:i((()=>[u("结束时间")])),_:1}),o(y,{class:"validity-value"},{default:i((()=>[u(c(h.formatDate(D.orderDetail.endTime)),1)])),_:1})])),_:1}),o(g,{class:"validity-duration"},{default:i((()=>[o(y,{class:"duration-text"},{default:i((()=>[u("有效期："+c(h.getValidityDuration()),1)])),_:1})])),_:1})])),_:1})])),_:1})):f("",!0),1===D.orderDetail.orderStatus?(d(),l(g,{key:1,class:"bottom-actions"},{default:i((()=>[o(p,{class:"action-button primary",onClick:h.goToVipCenter},{default:i((()=>[u("查看VIP特权")])),_:1},8,["onClick"])])),_:1})):f("",!0)])),_:1})}],["__scopeId","data-v-c0dc19a3"]]);export{h as default};
