import{_ as s,z as a,s as l,p as t,d as e,w as o,i as n,f as i,h as r,j as d,l as c,m as u,F as f,k as w,q as g,t as h,A as m,B as F,u as _,K as p}from"./index-BpPI9udZ.js";import{g as y}from"./follow.vf4K-1PI.js";import{toggleUserFollow as v}from"./api-user-detail.fhFDcuKa.js";const L=s({data:()=>({fansList:[],loading:!1}),onLoad(){this.loadFansList()},onPullDownRefresh(){this.loadFansList().finally((()=>{a()}))},methods:{async loadFansList(){try{this.loading=!0;const s=await y();200===s.code?this.fansList=s.data||[]:l({title:s.message||"获取粉丝列表失败",icon:"none"})}catch(s){console.error("获取粉丝列表失败:",s),l({title:"网络错误，请重试",icon:"none"})}finally{this.loading=!1}},async handleFollow(s,a){try{this.$set(this.fansList[a],"loading",!0);const t=await v(s.user.userId);200===t.code?(0===s.isFollow?this.fansList[a].isFollow=1:(1===s.isFollow||2===s.isFollow)&&(this.fansList[a].isFollow=0),l({title:t.message||"操作成功",icon:"success"})):l({title:t.message||"操作失败",icon:"none"})}catch(t){console.error("关注操作失败:",t),l({title:"网络错误，请重试",icon:"none"})}finally{this.$set(this.fansList[a],"loading",!1)}},goToUserDetail(s){s&&s.userId&&t({url:`/pages/user/user-detail?userId=${s.userId}`})},getGenderText(s){switch(s){case 1:return"男";case 2:return"女";default:return"未知"}},getFollowButtonClass(s){switch(s){case 0:default:return"follow-btn follow-btn-unfollow";case 1:return"follow-btn follow-btn-following";case 2:return"follow-btn follow-btn-mutual"}},getFollowButtonText(s){switch(s){case 0:default:return"关注";case 1:return"已关注";case 2:return"相互关注"}}}},[["render",function(s,a,l,t,y,v){const L=n,k=g,b=_,x=p;return i(),e(L,{class:"fans-list-container"},{default:o((()=>[0!==y.fansList.length||y.loading?(i(),e(L,{key:1,class:"fans-list"},{default:o((()=>[(i(!0),c(f,null,u(y.fansList,((s,a)=>(i(),e(L,{key:s.followId||a,class:"fan-item",onClick:a=>v.goToUserDetail(s.user)},{default:o((()=>[r(L,{class:"avatar-container"},{default:o((()=>{var a;return[r(b,{src:(null==(a=s.user)?void 0:a.avatarUrl)||"/static/message/default-avatar.png",class:"user-avatar",mode:"aspectFill"},null,8,["src"])]})),_:2},1024),r(L,{class:"user-info"},{default:o((()=>[r(k,{class:"user-name"},{default:o((()=>{var a,l;return[d(h((null==(a=s.user)?void 0:a.nickname)||"用户"+(null==(l=s.user)?void 0:l.userId)),1)]})),_:2},1024),r(k,{class:"user-desc"},{default:o((()=>{var a;return[d(h(v.getGenderText(null==(a=s.user)?void 0:a.gender)),1)]})),_:2},1024)])),_:2},1024),r(L,{class:"follow-btn-container"},{default:o((()=>[r(x,{class:m(v.getFollowButtonClass(s.isFollow)),onClick:F((l=>v.handleFollow(s,a)),["stop"]),disabled:s.loading},{default:o((()=>[d(h(v.getFollowButtonText(s.isFollow)),1)])),_:2},1032,["class","onClick","disabled"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):(i(),e(L,{key:0,class:"empty-state"},{default:o((()=>[r(L,{class:"empty-icon"},{default:o((()=>[d("👥")])),_:1}),r(k,{class:"empty-text"},{default:o((()=>[d("暂无粉丝")])),_:1}),r(k,{class:"empty-desc"},{default:o((()=>[d("分享精彩内容吸引更多粉丝")])),_:1})])),_:1})),y.loading?(i(),e(L,{key:2,class:"loading-container"},{default:o((()=>[r(L,{class:"loading-spinner"}),r(k,{class:"loading-text"},{default:o((()=>[d("加载中...")])),_:1})])),_:1})):w("",!0)])),_:1})}],["__scopeId","data-v-8d9779ce"]]);export{L as default};
