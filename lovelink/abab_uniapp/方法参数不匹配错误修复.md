# æ–¹æ³•å‚æ•°ä¸åŒ¹é…é”™è¯¯ä¿®å¤

## ğŸ› é”™è¯¯ä¿¡æ¯

```
D:\yunjisuan\zhuangaoliu\lovelink\langchain4j-ai\src\main\java\com\zhentao\tools\AppointmentTools.java:647:20
java: æ— æ³•å°†ç±» com.zhentao.tools.AppointmentToolsä¸­çš„æ–¹æ³• performUserRecommendationåº”ç”¨åˆ°ç»™å®šç±»å‹;
  éœ€è¦: java.lang.Long,java.lang.Integer,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.Integer
  æ‰¾åˆ°:    java.lang.Long,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.Integer
  åŸå› : å®é™…å‚æ•°åˆ—è¡¨å’Œå½¢å¼å‚æ•°åˆ—è¡¨é•¿åº¦ä¸åŒ
```

## ğŸ” é”™è¯¯åŸå› 

è¿™ä¸ªé”™è¯¯æ˜¯å› ä¸ºæˆ‘ä»¬ä¿®æ”¹äº† `performUserRecommendation` æ–¹æ³•çš„å‚æ•°ç­¾åï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªè°ƒç”¨çš„åœ°æ–¹æ²¡æœ‰åŒæ­¥æ›´æ–°ã€‚

### æ–¹æ³•ç­¾åå˜åŒ–

**ä¿®æ”¹å‰ï¼š**
```java
private RecommendationResult performUserRecommendation(
    Long userId, 
    Integer userGender, 
    Integer userAge, 
    String userLocation, 
    Integer limit
) {
    // 5ä¸ªå‚æ•°
}
```

**ä¿®æ”¹åï¼š**
```java
private RecommendationResult performUserRecommendation(
    Long userId, 
    Integer userGender, 
    Integer userRole,     // æ–°å¢çš„ç”¨æˆ·è§’è‰²å‚æ•°
    Integer userAge, 
    String userLocation, 
    Integer limit
) {
    // 6ä¸ªå‚æ•°
}
```

### è°ƒç”¨ä¸åŒ¹é…çš„ä½ç½®

**é”™è¯¯çš„è°ƒç”¨ï¼ˆç¬¬647è¡Œï¼‰ï¼š**
```java
return performUserRecommendation(userId, userGender, userAge, userLocation, limit);
// åªä¼ äº†5ä¸ªå‚æ•°ï¼Œç¼ºå°‘ userRole å‚æ•°
```

## âœ… ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤è°ƒç”¨ä»£ç 

**ä¿®å¤å‰ï¼š**
```java
if ("user".equals(recommendationType)) {
    return performUserRecommendation(userId, userGender, userAge, userLocation, limit);
}
```

**ä¿®å¤åï¼š**
```java
if ("user".equals(recommendationType)) {
    // é»˜è®¤ä¸ºæ™®é€šç”¨æˆ·è§’è‰²ï¼Œæ¨èå¼‚æ€§
    return performUserRecommendation(userId, userGender, 1, userAge, userLocation, limit);
}
```

### å‚æ•°è¯´æ˜

- `userId`: ç”¨æˆ·ID
- `userGender`: ç”¨æˆ·æ€§åˆ«ï¼ˆ0-å¥³ï¼Œ1-ç”·ï¼‰
- `userRole`: **æ–°å¢** ç”¨æˆ·è§’è‰²ï¼ˆ1-æ™®é€šç”¨æˆ·ï¼Œ2-çº¢å¨˜ï¼‰
- `userAge`: ç”¨æˆ·å¹´é¾„
- `userLocation`: ç”¨æˆ·åœ°åŒº
- `limit`: æ¨èæ•°é‡é™åˆ¶

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### ä¸ºä»€ä¹ˆæ·»åŠ  userRole å‚æ•°ï¼Ÿ

1. **ä¸šåŠ¡éœ€æ±‚**ï¼šéœ€è¦æ ¹æ®ç”¨æˆ·è§’è‰²æ¨èä¸åŒå†…å®¹
   - æ™®é€šç”¨æˆ·ï¼šæ¨èå¼‚æ€§ç”¨æˆ·
   - çº¢å¨˜ï¼šæ¨èæ‰€æœ‰ç”¨æˆ·

2. **å‚æ•°ä¼ é€’é“¾**ï¼š
   ```
   å‰ç«¯ â†’ ChatForm â†’ å·¥å…·æ–¹æ³• â†’ performUserRecommendation
   ```

3. **é»˜è®¤å€¼å¤„ç†**ï¼š
   - åœ¨æ—§çš„è°ƒç”¨ä¸­ï¼Œé»˜è®¤è®¾ç½®ä¸º `1`ï¼ˆæ™®é€šç”¨æˆ·ï¼‰
   - ä¿æŒå‘åå…¼å®¹æ€§

### æ–¹æ³•è°ƒç”¨æ£€æŸ¥

ç°åœ¨æ‰€æœ‰çš„ `performUserRecommendation` è°ƒç”¨éƒ½å·²æ­£ç¡®ï¼š

1. **å·¥å…·æ–¹æ³•è°ƒç”¨**ï¼ˆç¬¬120è¡Œï¼‰ï¼š
   ```java
   RecommendationResult result = performUserRecommendation(userId, userGender, userRole, userAge, userLocation, limit);
   ```

2. **é€šç”¨æ¨èæ–¹æ³•è°ƒç”¨**ï¼ˆç¬¬648è¡Œï¼‰ï¼š
   ```java
   return performUserRecommendation(userId, userGender, 1, userAge, userLocation, limit);
   ```

## ğŸ§ª éªŒè¯ä¿®å¤

### ç¼–è¯‘æµ‹è¯•
```bash
cd langchain4j-ai
mvn compile
```

åº”è¯¥ä¸å†å‡ºç°ç¼–è¯‘é”™è¯¯ã€‚

### åŠŸèƒ½æµ‹è¯•
1. **æ™®é€šç”¨æˆ·æ¨è**ï¼šåº”è¯¥æ¨èå¼‚æ€§ç”¨æˆ·
2. **çº¢å¨˜ç”¨æˆ·æ¨è**ï¼šåº”è¯¥æ¨èæ‰€æœ‰ç”¨æˆ·
3. **æ—§æ¥å£å…¼å®¹**ï¼šé€šè¿‡ `getRecommendations` è°ƒç”¨åº”è¯¥æ­£å¸¸å·¥ä½œ

## ğŸ’¡ é¿å…ç±»ä¼¼é”™è¯¯çš„å»ºè®®

### 1. æ–¹æ³•é‡æ„æ—¶çš„æ£€æŸ¥æ¸…å•
- [ ] æ›´æ–°æ‰€æœ‰è°ƒç”¨è¯¥æ–¹æ³•çš„åœ°æ–¹
- [ ] æ£€æŸ¥æ˜¯å¦æœ‰é‡è½½æ–¹æ³•éœ€è¦å¤„ç†
- [ ] è€ƒè™‘å‘åå…¼å®¹æ€§
- [ ] æ·»åŠ é€‚å½“çš„é»˜è®¤å€¼

### 2. IDE å·¥å…·ä½¿ç”¨
- ä½¿ç”¨ IDE çš„"æŸ¥æ‰¾ç”¨æ³•"åŠŸèƒ½æ‰¾åˆ°æ‰€æœ‰è°ƒç”¨
- ä½¿ç”¨"é‡æ„"åŠŸèƒ½è‡ªåŠ¨æ›´æ–°æ–¹æ³•ç­¾å
- ç¼–è¯‘å‰æ£€æŸ¥æ‰€æœ‰ç›¸å…³æ–‡ä»¶

### 3. æ¸è¿›å¼é‡æ„
```java
// æ–¹æ¡ˆ1ï¼šä¿ç•™æ—§æ–¹æ³•ï¼Œæ·»åŠ æ–°æ–¹æ³•
private RecommendationResult performUserRecommendation(Long userId, Integer userGender, Integer userAge, String userLocation, Integer limit) {
    return performUserRecommendation(userId, userGender, 1, userAge, userLocation, limit);
}

private RecommendationResult performUserRecommendation(Long userId, Integer userGender, Integer userRole, Integer userAge, String userLocation, Integer limit) {
    // æ–°çš„å®ç°
}
```

## ğŸ¯ ä¿®å¤ç»“æœ

âœ… **ç¼–è¯‘é”™è¯¯å·²è§£å†³**ï¼šæ‰€æœ‰æ–¹æ³•è°ƒç”¨å‚æ•°åŒ¹é…
âœ… **åŠŸèƒ½å®Œæ•´**ï¼šæ”¯æŒæ ¹æ®ç”¨æˆ·è§’è‰²æ¨èä¸åŒå†…å®¹
âœ… **å‘åå…¼å®¹**ï¼šæ—§çš„è°ƒç”¨æ–¹å¼ä»ç„¶æœ‰æ•ˆ
âœ… **ä»£ç æ¸…æ™°**ï¼šå‚æ•°å«ä¹‰æ˜ç¡®ï¼Œæ³¨é‡Šå®Œå–„

ç°åœ¨å¯ä»¥æ­£å¸¸ç¼–è¯‘å’Œè¿è¡Œé¡¹ç›®äº†ï¼
